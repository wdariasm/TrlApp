<!--
  Generated template for the ServicioPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Solicitar Servicio</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
  <form #formServicio="ngForm">

    <div padding>
      <ion-segment [(ngModel)]="opcion" name="tbOpcion">
        <ion-segment-button value="Contrato">
          <ion-icon name="document"></ion-icon>
        </ion-segment-button>
        <ion-segment-button value="TipoServicio">
          <ion-icon name="calendar"></ion-icon>
        </ion-segment-button>
        <ion-segment-button value="Direccion">
          <ion-icon name="locate"></ion-icon>
        </ion-segment-button>
        <ion-segment-button value="Responsable">
          <ion-icon name="contact"></ion-icon>
        </ion-segment-button>
        <ion-segment-button value="Paradas">
          <ion-icon name="navigate"></ion-icon>
        </ion-segment-button>
        <ion-segment-button value="Pago">
          <ion-icon name="card"></ion-icon>
        </ion-segment-button>
      </ion-segment>
    </div>

    <ion-item>
      <ion-label> (*) Campos Obligatorios.</ion-label>
    </ion-item>

    <div [ngSwitch]="opcion">

      <ion-item>
        <ion-label floating>Contrato *</ion-label>
        <ion-select [(ngModel)]="contratoSelect" name="cboContrato" required="true" (ionChange)="buscarContrato('COMBO', true)" okText="Ok" cancelText="Cancelar">
          <ion-option *ngFor="let cto of contratos" [value]="cto">{{cto.ctNumeroContrato}}</ion-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label floating>Nombre Completo *</ion-label>
        <ion-input type="text" [(ngModel)]="contrato.Nombre" required="true" disabled name="txtNombre"></ion-input>
      </ion-item>


      <ion-item>
        <ion-label floating>Tipo Servicio *</ion-label>
        <ion-select [(ngModel)]="servicio.Tipo" name="cboTipoServicio">
          <ion-option *ngFor="let ctipo of contrato.TipoServicio" [value]="ctipo">{{ctipo.csDescripcion}}</ion-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label floating>Fecha Servicio *</ion-label>
        <ion-datetime displayFormat="DD/MM/YYYY" [(ngModel)]="servicio.FechaServicio" name="txtFechaServicio"></ion-datetime>
      </ion-item>

      <ion-item>
        <ion-label floating>Hora Servicio *</ion-label>
        <ion-datetime displayFormat="HH:mm:ss" [(ngModel)]="servicio.Hora" name="txtHora" aria-required="true"></ion-datetime>
      </ion-item>

      <ion-item>
        <ion-label floating>Modo Servicio *</ion-label>
        <ion-select [(ngModel)]="servicio.ModoServicio" name="cboModo">
          <ion-option value="PROGRAMADO">PROGRAMADO</ion-option>
          <ion-option value="INMEDIATO">INMEDIATO</ion-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label floating>N° Pasajeros *</ion-label>
        <ion-input type="number" value="" maxlength="2" required="true"></ion-input>
      </ion-item>

      <ion-list radio-group [(ngModel)]="asignacion.Ruta" name="rdAsignacionRuta" *ngIf="servicio.Tipo.csTipoServicioId == 3">
        <ion-list-header>
          Tipo Traslado
        </ion-list-header>
        <ion-item>
          <ion-label>Solo Ida</ion-label>
          <ion-radio checked="true" value="ida"></ion-radio>
        </ion-item>

        <ion-item>
          <ion-label>Ida y Vuelta</ion-label>
          <ion-radio value="doble"></ion-radio>
        </ion-item>
      </ion-list>

      <!--Datos de tipo de servicio traslado-->
      <div *ngIf="servicio.Tipo.csTipoServicioId == 4">
        <ion-item>
          <ion-label floating>Seleccionar traslado *</ion-label>
          <ion-select [(ngModel)]="trasladoSelect" name="cboRutas">

          </ion-select>
        </ion-item>

        <ion-item>
          <ion-label floating>Description</ion-label>
          <ion-textarea [(ngModel)]="trasladoSelect.muNombre" name="txtDescripcion"></ion-textarea>
        </ion-item>
      </div>

      <ion-item>
        <ion-label floating>Tipo de Vehículo *</ion-label>
        <ion-select [(ngModel)]="tipoSelect" name="cboTipoVehiculo" required="true">

        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label floating>Responsable del Servicio *</ion-label>
        <ion-input type="text" [(ngModel)]="contacto.scNombre" name="txtResponsable" maxlength="60"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label floating>Teléfono *</ion-label>
        <ion-input type="text" [(ngModel)]="contacto.scTelefono" name="txtTelefonoPpal" maxlength="15"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label floating>Nota Servicio / C.Costo </ion-label>
        <ion-textarea [(ngModel)]="contacto.scNota" name="txtNota" maxlength="200"></ion-textarea>
      </ion-item>

      <ion-item>
        <button id="btnAgregarResponsable" ion-button color="secondary" outline (click)="agregarContacto()">
          <ion-icon name="add"></ion-icon>Agregar</button>
      </ion-item>

      <ion-list>
          <ion-item *ngFor="let item of servicio.Contactos; let idx = index">
            <h2>Resp. {{item.scNombre}}</h2>
            <h3>Tel. {{item.scTelefono}}</h3>
            <button color="danger" clear ion-button icon-only  item-end icon-left (click)="quitarContacto(idx)">
              <ion-icon name="trash"></ion-icon>
            </button>
            <p>Nota. {{item.scNota}}</p>
            
          </ion-item>
        </ion-list>

      <ion-item>
        <ion-label floating>Dirección de parada </ion-label>
        <ion-input type="text" [(ngModel)]="parada.prDireccion" name="txtParada" maxlength="250"></ion-input>
      </ion-item>

      <ion-item>
        <button id="btnAgregarParada" ion-button color="secondary" outline (click)="agregarParada()">
          <ion-icon name="add"></ion-icon>Agregar</button>
      </ion-item>

      <ion-list>
        <ion-item *ngFor="let item of servicio.Paradas; let idx1 = index">
          <h2>Dir. {{item.prDireccion}}</h2>
          <p>Valor. ${{item.prValorCliente | number}}</p>
          <button color="danger" clear ion-button icon-only  item-end icon-left (click)="quitarParada(idx1)">
            <ion-icon name="trash"></ion-icon>
          </button>
        </ion-item>
        <ion-item>
          <h3>SubTotal: <span color="danger"> ${{subTotal | number }}</span></h3>
        </ion-item>
      </ion-list>

      <ion-item>
        <ion-label floating>Forma de Pago *</ion-label>
        <ion-select [(ngModel)]="servicio.FormaPago" name="cboPago" required="true">
          <ion-option *ngFor="let fpago of contrato.FormaPago" [value]="fpago">{{fpago}}</ion-option>
        </ion-select>
      </ion-item>

    </div>

  </form>
</ion-content>